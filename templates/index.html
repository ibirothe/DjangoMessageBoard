{% extends "base.html" %}

{% block title %}Message Board{% endblock %}

{% block content %}
<h2>Messages</h2>

  <a href="{% url 'add_message' %}">➕ Add a new message</a>

{% for message in messages %}
  <div class="message">
    <p><strong>{{ message.author }}</strong> - {{ message.created_at|date:"M d, Y H:i" }}</p>
    <p>{{ message.text }}</p>
    Likes: {{ message.total_likes }}
    {% if user.is_authenticated %}
      <a href="{% url 'like_message' message.pk %}">
        {% if user in message.likes.all %}💔 Unlike{% else %}❤️ Like{% endif %}
      </a>
    {% endif %}
    {% if user.is_authenticated and user.username == message.author %}
      <p>
        <a href="{% url 'edit_message' message.pk %}">✏️ Edit</a> |
        <a href="{% url 'delete_message' message.pk %}">🗑️ Delete</a>
      </p>
    {% endif %}
  </div>
  <hr>
{% empty %}
  <p>No messages yet.</p>
{% endfor %}

{% endblock %}
